# ============================================================================
# mTLS PKI Portal - Environment Configuration
# ============================================================================
# Copy this file to .env and modify for your environment

# ============================================================================
# Application Settings
# ============================================================================
APP_URL=https://pki.example.com

# ============================================================================
# OIDC Settings (Authentik)
# ============================================================================
# The OIDC issuer URL (without trailing slash)
# For Authentik: https://auth.example.com/application/o/<application-slug>/
OIDC_ISSUER=https://auth.example.com/application/o/pki/

# The client ID configured in your OIDC provider
OIDC_CLIENT_ID=pki-app

# Client secret (leave empty if using PKCE-only, which is recommended)
OIDC_CLIENT_SECRET=

# Scopes to request (comma-separated)
OIDC_SCOPES=openid,profile,email,groups

# ============================================================================
# Database
# ============================================================================
POSTGRES_USER=pki
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_DB=pki
POSTGRES_HOST=db
POSTGRES_PORT=5432

# ============================================================================
# Certificate Authorities
# ============================================================================
# Path to the config file containing CA definitions and subject mappings
# This is the only file that needs YAML (for complex nested structure)
CONFIG_PATH=/app/config.yaml

# CA key passwords (if encrypted) - add as needed
# INTERNAL_CA_KEY_PASSWORD=

# ============================================================================
# Email Notifications (Optional)
# ============================================================================
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_ADDRESS=pki@example.com
SMTP_FROM_DISPLAY_NAME=PKI Portal
SMTP_USE_TLS=true
SMTP_SERVER_NAME=pki.example.com
SMTP_APPROVER_EMAILS=